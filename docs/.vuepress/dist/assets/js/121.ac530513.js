(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{394:function(a,t,s){"use strict";s.r(t);var e=s(3),v=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"第十一章-项目部署之通用方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第十一章-项目部署之通用方案"}},[a._v("#")]),a._v(" 第十一章：项目部署之通用方案")]),a._v(" "),t("h2",{attrs:{id:"_11-1-开篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-开篇"}},[a._v("#")]),a._v(" 11-1：开篇")]),a._v(" "),t("p",[a._v("那么到这里我们的整个课程就已经接近尾声了。")]),a._v(" "),t("p",[a._v("最后我们就需要来看一下项目的打包和发布功能，这两个功能也就是我们本章节的主要功能。")]),a._v(" "),t("h2",{attrs:{id:"_11-2-项目构建过程分析与实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-项目构建过程分析与实现"}},[a._v("#")]),a._v(" 11-2：项目构建过程分析与实现")]),a._v(" "),t("p",[a._v("本小节我们主要围绕着三个问题来去讲：")]),a._v(" "),t("ol",[t("li",[a._v("为什么需要打包项目？")]),a._v(" "),t("li",[a._v("打包之后项目可以通过浏览器直接访问吗？")]),a._v(" "),t("li",[a._v("为什么需要有服务？")])]),a._v(" "),t("p",[t("strong",[a._v("为什么需要打包项目：")])]),a._v(" "),t("p",[a._v("浏览器只能识别并运行 "),t("strong",[t("code",[a._v("html、css、js")]),a._v(" 文件")]),a._v(" 。")]),a._v(" "),t("p",[a._v("那么换句话而言，项目中的 "),t("code",[a._v(".vue")]),a._v(" 文件，浏览器是不认识的。")]),a._v(" "),t("p",[a._v("而打包的过程就是把 "),t("code",[a._v(".vue")]),a._v(" 的 "),t("strong",[a._v("单文件组件")]),a._v(" 打包成 "),t("code",[a._v("html、css、js")]),a._v(" 的文件，让浏览器进行识别，并展示我们的项目")]),a._v(" "),t("p",[t("strong",[a._v("打包之后项目可以通过浏览器直接访问吗？")])]),a._v(" "),t("p",[a._v("我们可以测试一下。")]),a._v(" "),t("p",[a._v("通过 "),t("code",[a._v("npm run build")]),a._v(" 打包项目之后，打包的文件会被放入到 "),t("code",[a._v("dist")]),a._v(" 文件夹中，其实我们可以直接双击 "),t("code",[a._v("index.html")]),a._v(" 文件，可以发现，浏览器是 "),t("strong",[a._v("无法")]),a._v(" 显示项目的。")]),a._v(" "),t("p",[a._v("打开 "),t("code",[a._v("F12")]),a._v(" 可以发现，终端中抛出了很多的错误。")]),a._v(" "),t("p",[a._v("那么根据这些错误可以知道，无法显示的原因是因为 "),t("strong",[a._v("一些文件找不到了")]),a._v("。")]),a._v(" "),t("p",[a._v("那么为什么找不到呢？")]),a._v(" "),t("p",[a._v("查看我们的 "),t("code",[a._v("url")]),a._v(" 可以发现，其实我们的 "),t("code",[a._v("url")]),a._v(" 是一个 "),t("code",[a._v("file")]),a._v(" 协议。那么对应的文件路径就会编程 "),t("code",[a._v("盘符下的 xxx")]),a._v(" ，在我们当前的盘符下没有对应的文件，那么自然是无法找到的。")]),a._v(" "),t("p",[a._v("而想要解决这个问题的话，就需要把我们的项目运行到一个 "),t("strong",[a._v("服务")]),a._v(" 中，就像我们开发时的 "),t("a",{attrs:{href:"https://webpack.docschina.org/configuration/dev-server/",target:"_blank",rel:"noopener noreferrer"}},[a._v("devServer"),t("OutboundLink")],1),a._v(" 一样。")]),a._v(" "),t("p",[t("strong",[a._v("为什么需要有服务？")])]),a._v(" "),t("p",[a._v("明确了上面的问题之后，为什么要有服务就比较好理解了。")]),a._v(" "),t("p",[a._v("我们需要通过一个 "),t("strong",[a._v("服务")]),a._v(" 托管我们的项目，从而避免出现模块无法被找到等问题。")]),a._v(" "),t("hr"),a._v(" "),t("p",[a._v("那么明确好了，以上问题之后，接下来我们就可以打包我们的项目，并且把项目部署到服务器之中。")]),a._v(" "),t("p",[a._v("我们可以通过 "),t("code",[a._v("npm run build")]),a._v(" 打包项目，打包好项目之后，接下来我们再来看如何到服务器中部署我们的服务。")]),a._v(" "),t("h2",{attrs:{id:"_11-3-域名、dns、公网-ip、服务器、nginx-之间的关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-域名、dns、公网-ip、服务器、nginx-之间的关系"}},[a._v("#")]),a._v(" 11-3：域名、DNS、公网 IP、服务器、Nginx 之间的关系")]),a._v(" "),t("p",[a._v("在处理我们的服务之前，我们明确一些基本的概念，这些概念有：")]),a._v(" "),t("ol",[t("li",[a._v("域名："),t("code",[a._v("https://imooc-admin.lgdsunday.club")])]),a._v(" "),t("li",[a._v("DNS：域名解析服务器")]),a._v(" "),t("li",[a._v("公网 IP：服务器在网络中的唯一地址")]),a._v(" "),t("li",[a._v("服务器：服务部署的电脑")]),a._v(" "),t("li",[a._v("Nginx：网页服务")])]),a._v(" "),t("p",[t("img",{attrs:{src:"%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B9%8B%E9%80%9A%E7%94%A8%E6%96%B9%E6%A1%88.assets/image-20211011202658109.png",alt:"image-20211011202658109"}})]),a._v(" "),t("h2",{attrs:{id:"_11-4-阿里云服务器购买指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-阿里云服务器购买指南"}},[a._v("#")]),a._v(" 11-4：阿里云服务器购买指南")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://ecs-buy.aliyun.com/wizard/#/prepay/cn-beijing?fromDomain=true",target:"_blank",rel:"noopener noreferrer"}},[a._v("云服务器 ECS 自定义购买"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"_11-5-服务器连接方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-服务器连接方式"}},[a._v("#")]),a._v(" 11-5：服务器连接方式")]),a._v(" "),t("p",[a._v("常见的连接服务器的方式有三种：")]),a._v(" "),t("ol",[t("li",[a._v("阿里云控制台中进行远程链接")]),a._v(" "),t("li",[t("strong",[a._v("通过 "),t("code",[a._v("SSH")]),a._v(" 工具")]),a._v("（"),t("a",{attrs:{href:"https://www.netsarang.com/en/xshell/",target:"_blank",rel:"noopener noreferrer"}},[a._v("XShell"),t("OutboundLink")],1),a._v("）")]),a._v(" "),t("li",[t("code",[a._v("SSH")]),a._v(" 指令远程登录")])]),a._v(" "),t("p",[a._v("那么我们这里使用第二种 "),t("strong",[a._v("通过 "),t("code",[a._v("SSH")]),a._v(" 工具")]),a._v("（"),t("a",{attrs:{href:"https://www.netsarang.com/en/xshell/",target:"_blank",rel:"noopener noreferrer"}},[a._v("XShell"),t("OutboundLink")],1),a._v("）进行连接。")]),a._v(" "),t("ol",[t("li",[a._v("新建会话\n"),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"第十一章：项目部署之通用方案.assets/image-20211011203212635.png",alt:"image-20211011203212635"}})]),a._v(" "),t("li",[a._v("确定会话信息，协议为 "),t("code",[a._v("SSH")]),a._v("、主机为服务器 IP、端口号为 22\n"),t("img",{staticStyle:{zoom:"67%"},attrs:{src:"第十一章：项目部署之通用方案.assets/image-20211011203403394.png",alt:"image-20211011203403394"}})]),a._v(" "),t("li",[a._v("双击会话进行连接\n"),t("img",{attrs:{src:"%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B9%8B%E9%80%9A%E7%94%A8%E6%96%B9%E6%A1%88.assets/image-20211011203436662.png",alt:"image-20211011203436662"}})]),a._v(" "),t("li",[a._v("输入你的用户名（默认为 "),t("code",[a._v("root")]),a._v("）\n"),t("img",{attrs:{src:"%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B9%8B%E9%80%9A%E7%94%A8%E6%96%B9%E6%A1%88.assets/image-20211011203504688.png",alt:"image-20211011203504688"}})]),a._v(" "),t("li",[a._v("输入你的密码\n"),t("img",{staticStyle:{zoom:"67%"},attrs:{src:"第十一章：项目部署之通用方案.assets/image-20211011203533726.png",alt:"image-20211011203533726"}})]),a._v(" "),t("li",[a._v("出现此信息，表示连接成功\n"),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"第十一章：项目部署之通用方案.assets/image-20211011203631626.png",alt:"image-20211011203631626"}})])]),a._v(" "),t("h2",{attrs:{id:"_11-6-nginx-环境处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-nginx-环境处理"}},[a._v("#")]),a._v(" 11-6：Nginx 环境处理")]),a._v(" "),t("ol",[t("li",[t("p",[t("code",[a._v("nginx")]),a._v(" 编译时依赖 "),t("code",[a._v("gcc")]),a._v(" 环境")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install gcc gcc-c++\n")])])])]),a._v(" "),t("li",[t("p",[a._v("安装 "),t("code",[a._v("prce")]),a._v("，让 "),t("code",[a._v("nginx")]),a._v(" 支持重写功能")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install pcre*\n")])])])]),a._v(" "),t("li",[t("p",[a._v("安装 "),t("code",[a._v("zlib")]),a._v("，"),t("code",[a._v("nginx")]),a._v(" 使用 "),t("code",[a._v("zlib")]),a._v(" 对 "),t("code",[a._v("http")]),a._v(" 包内容进行 "),t("code",[a._v("gzip")]),a._v(" 压缩")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install zlib zlib-devel\n")])])])]),a._v(" "),t("li",[t("p",[a._v("安装 "),t("code",[a._v("openssl")]),a._v("，用于通讯加密")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install openssl openssl-devel\n")])])])]),a._v(" "),t("li",[t("p",[a._v("进行 "),t("code",[a._v("nginx")]),a._v(" 安装")])]),a._v(" "),t("li",[t("p",[a._v("创建 "),t("code",[a._v("nginx")]),a._v(" 文件夹")])]),a._v(" "),t("li",[t("p",[a._v("下载 "),t("code",[a._v("nginx")]),a._v(" 压缩包")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget https://nginx.org/download/nginx-1.11.5.tar.gz\n")])])])]),a._v(" "),t("li",[t("p",[a._v("解压 "),t("code",[a._v("nginx")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -zxvf  nginx-1.11.5.tar.gz\n")])])])]),a._v(" "),t("li",[t("p",[a._v("进入 "),t("code",[a._v("nginx-1.11.5")]),a._v(" 目录")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd nginx-1.11.5\n")])])])]),a._v(" "),t("li",[t("p",[a._v("检查平台安装环境")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("./configure --prefix=/usr/local/nginx\n")])])])]),a._v(" "),t("li",[t("p",[a._v("进行源码编译")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("make\n")])])])]),a._v(" "),t("li",[t("p",[a._v("安装 "),t("code",[a._v("nginx")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("make install\n")])])])]),a._v(" "),t("li",[t("p",[a._v("查看 "),t("code",[a._v("nginx")]),a._v(" 配置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("/usr/local/nginx/sbin/nginx -t\n")])])])]),a._v(" "),t("li",[t("p",[a._v("制作 "),t("code",[a._v("nginx")]),a._v(" 软连接")])]),a._v(" "),t("li",[t("p",[a._v("进入 "),t("code",[a._v("usr/bin")]),a._v(" 目录")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd /usr/bin\n")])])])]),a._v(" "),t("li",[t("p",[a._v("制作软连接")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ln -s /usr/local/nginx/sbin/nginx nginx\n")])])])]),a._v(" "),t("li",[t("p",[a._v("接下来制作配置文件")])]),a._v(" "),t("li",[t("p",[a._v("首先进入到 "),t("code",[a._v("nginx")]),a._v(" 的默认配置文件中")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /usr/local/nginx/conf/nginx.conf\n")])])])]),a._v(" "),t("li",[t("p",[a._v("在最底部增加配置项（按下 "),t("code",[a._v("i")]),a._v(" 进入 输入模式）")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("include /nginx/*.conf;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("按下 "),t("code",[a._v("esc")]),a._v(" 键，通过 "),t("code",[a._v(":wq!")]),a._v(" 保存并退出")])]),a._v(" "),t("li",[t("p",[a._v("创建新的配置文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("touch /nginx/nginx.conf\n")])])])]),a._v(" "),t("li",[t("p",[a._v("进入到 "),t("code",[a._v("/root/nginx/nginx.conf")]),a._v(" 文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /nginx/nginx.conf\n")])])])]),a._v(" "),t("li",[t("p",[a._v("写入如下配置")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("# imooc"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("admin\nserver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    # 端口\n    listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    # 域名\n    server_name  localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    # 资源地址\n    root   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("nginx"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    # 目录浏览\n    autoindex on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    # 缓存处理\n    add_header Cache"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Control "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"no-cache, must-revalidate"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    # 请求配置\n    location "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        # 跨域\n        add_header Access"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Control"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Allow"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Origin "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        # 返回 index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html\n        try_files $uri $uri"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("通过 "),t("code",[a._v(":wq!")]),a._v(" 保存退出")])]),a._v(" "),t("li",[t("p",[a._v("在 "),t("code",[a._v("root/nginx")]),a._v(" 中创建 "),t("code",[a._v("dist")]),a._v(" 文件夹")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mkdir /nginx/dist\n")])])])]),a._v(" "),t("li",[t("p",[a._v("在 "),t("code",[a._v("nginx/dist")]),a._v(" 中写入 "),t("code",[a._v("index.html")]),a._v(" 进行测试")])]),a._v(" "),t("li",[t("p",[a._v("通过 "),t("code",[a._v("nginx -s reload")]),a._v(" 重启服务")])]),a._v(" "),t("li",[t("p",[a._v("在 浏览器中通过，"),t("code",[a._v("IP")]),a._v(" 测试访问")])])]),a._v(" "),t("h2",{attrs:{id:"_11-7-项目发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-项目发布"}},[a._v("#")]),a._v(" 11-7：项目发布")]),a._v(" "),t("p",[a._v("可以通过 "),t("a",{attrs:{href:"https://www.netsarang.com/en/xftp/",target:"_blank",rel:"noopener noreferrer"}},[a._v("XFTP"),t("OutboundLink")],1),a._v(" 进行数据传输")]),a._v(" "),t("h2",{attrs:{id:"_11-8-总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-总结"}},[a._v("#")]),a._v(" 11-8：总结")]),a._v(" "),t("p",[a._v("本章节主要讲解了一些基础的 "),t("strong",[a._v("部署")]),a._v(" 相关的知识，这些内容并不复杂，属于通用性内容。")]),a._v(" "),t("p",[a._v("那么现在我们的项目就已经可以部署到我们的服务器中了，大家就可以根据自己的域名进行对应的访问了")])])}),[],!1,null,null,null);t.default=v.exports}}]);