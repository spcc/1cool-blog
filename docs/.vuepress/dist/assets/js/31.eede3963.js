(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{303:function(t,s,e){"use strict";e.r(s);var a=e(3),o=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"客户端存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端存储"}},[t._v("#")]),t._v(" 客户端存储")]),t._v(" "),s("p",[s("strong",[t._v("前端存储数据的方式有四种："),s("code",[t._v("cookie")]),t._v(" 丶 "),s("code",[t._v("localStorage")]),t._v(" 丶 "),s("code",[t._v("sessionStorage")]),t._v("丶 "),s("code",[t._v("indexDB(存储容量大，可以存几百兆)。")])])]),t._v(" "),s("p",[s("strong",[t._v("区别：")])]),t._v(" "),s("ul",[s("li",[t._v("存储大小\n"),s("ul",[s("li",[s("code",[t._v("cookie")]),t._v(" 数据大小不能超过 4k")]),t._v(" "),s("li",[s("code",[t._v("sessionStorage")]),t._v(" 和 "),s("code",[t._v("localStorage")]),t._v(" 可以达到 5M 或更大")])])]),t._v(" "),s("li",[t._v("有效时间\n"),s("ul",[s("li",[t._v("​"),s("code",[t._v("cookie")]),t._v(" 设置的过期时间之前一直有效，浏览器关闭后数据不会丢失；")]),t._v(" "),s("li",[s("code",[t._v("localStorage")]),t._v(" 存储持久数据，浏览器关闭后数据不丢失除非主动删除数据")]),t._v(" "),s("li",[t._v("​"),s("code",[t._v("sessionStorage")]),t._v(" 数据在当前浏览器关闭后自动删除")])])]),t._v(" "),s("li",[t._v("数据与服务器交互\n"),s("ul",[s("li",[s("code",[t._v("cookie")]),t._v(" 的数据会自动的传递到服务器，服务器端也可以写 "),s("code",[t._v("cookie")]),t._v(" 到客户端")]),t._v(" "),s("li",[t._v("​"),s("code",[t._v("sessionStorage")]),t._v(" 和 "),s("code",[t._v("localStorage")]),t._v(" 不会自动把数据发给服务器，仅在本地保存")])])]),t._v(" "),s("li",[t._v("作用域\n"),s("ul",[s("li",[s("code",[t._v("Cookie")]),t._v("、"),s("code",[t._v("SessionStorage")]),t._v("、 "),s("code",[t._v("LocalStorage")]),t._v(" 数据共享都遵循同源策略，"),s("code",[t._v("SessionStorage")]),t._v(" 还限制必须是同一个页面")])])])]),t._v(" "),s("p",[s("strong",[t._v("应用场景")])]),t._v(" "),s("ul",[s("li",[t._v("cookie 一般用于存储登录验证信息")]),t._v(" "),s("li",[t._v("localStorage 常用于存储不易变动的数据，减轻服务器的压力")]),t._v(" "),s("li",[t._v("sessionStorage 可以用来检测用户是否是刷新进入页面或者一次性数据")])]),t._v(" "),s("h2",{attrs:{id:"客户端存储概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端存储概念"}},[t._v("#")]),t._v(" 客户端存储概念")]),t._v(" "),s("ul",[s("li",[t._v("客户端存储遵守“同源策略”，不同的站点页面之间不能相互读取彼此的数据")]),t._v(" "),s("li",[t._v("在同一个站点的不同页面之间，存储的数据是共享的")]),t._v(" "),s("li",[t._v("在使用数据存储是需要考虑安全问题，比如银行卡账号密码")])]),t._v(" "),s("h2",{attrs:{id:"cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" cookie")]),t._v(" "),s("p",[t._v("cookie 是存储在浏览器中的纯文本，浏览器的安装目录下会专门有一个 cookie 文件夹来存放各个域下设置的 cookie。")]),t._v(" "),s("p",[t._v("cookie 在满足条件的情况下（地已经缓存 cookies，然后根据请求的 URL 来匹配 cookies 的 domain(域名)、path(路径) 属性都符合才会发送），当网页要发 "),s("code",[t._v("http")]),t._v(" 请求时，浏览器会先检查是否有相应的 "),s("code",[t._v("cookie")]),t._v("，有则自动添加在 "),s("code",[t._v("request header")]),t._v(" 中的 "),s("code",[t._v("cookie")]),t._v(" 字段中")]),t._v(" "),s("h3",{attrs:{id:"创建-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建-cookie"}},[t._v("#")]),t._v(" 创建 cookie")]),t._v(" "),s("p",[s("code",[t._v("document.cookie = 'key=value'")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例如")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name=mike'")]),t._v("\n")])])]),s("h3",{attrs:{id:"获取-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取-cookie"}},[t._v("#")]),t._v(" 获取 cookie")]),t._v(" "),s("p",[t._v("这个方法只能获取非 "),s("code",[t._v("HttpOnly")]),t._v(" 类型的 "),s("code",[t._v("cookie")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" myCookie "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie\n")])])]),s("h2",{attrs:{id:"localstorage-和-sessionstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localstorage-和-sessionstorage"}},[t._v("#")]),t._v(" LocalStorage 和 SessionStorage")]),t._v(" "),s("p",[s("code",[t._v("LocalStorage")]),t._v(" 和 "),s("code",[t._v("SessionStorage")]),t._v(" 是 "),s("code",[t._v("window")]),t._v(" 的两个属性，都代表同一个 "),s("code",[t._v("Storage")]),t._v(" 对象；")]),t._v(" "),s("p",[s("code",[t._v("localStorage")]),t._v(" 和 "),s("code",[t._v("sessionStorage")]),t._v(" 的 API：")]),t._v(" "),s("ul",[s("li",[t._v("setItem(string key, value)：将对应的键值对的 key 和 value 传递进去，可以实现数据存储；")]),t._v(" "),s("li",[t._v("getItem(string key)：将键传递进去，可以获取对应的值；")]),t._v(" "),s("li",[t._v("removeItem(string key)：将键传递进去，可以删除对应的值；")]),t._v(" "),s("li",[t._v("clear()：删除所有的缓存值，不需要参数；")]),t._v(" "),s("li",[t._v("length：属性，获取键值对总数；")]),t._v(" "),s("li",[t._v("key()：传入位置数，获取存储的值的键；")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jzx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlocalStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'age'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'age'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=o.exports}}]);