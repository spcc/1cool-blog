<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>创建项目 | 1cool</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/cc/js/MouseClickEffect.js"></script>
    <meta name="description" content="- . -">
    
    <link rel="preload" href="/cc/assets/css/0.styles.a52545ab.css" as="style"><link rel="preload" href="/cc/assets/js/app.fafbc94b.js" as="script"><link rel="preload" href="/cc/assets/js/2.1f85ea53.js" as="script"><link rel="preload" href="/cc/assets/js/95.36914ac2.js" as="script"><link rel="prefetch" href="/cc/assets/js/10.bf8e7b98.js"><link rel="prefetch" href="/cc/assets/js/100.a2b7364b.js"><link rel="prefetch" href="/cc/assets/js/101.cce42b65.js"><link rel="prefetch" href="/cc/assets/js/11.4caff987.js"><link rel="prefetch" href="/cc/assets/js/12.5138a056.js"><link rel="prefetch" href="/cc/assets/js/13.095b69b1.js"><link rel="prefetch" href="/cc/assets/js/14.8e46c639.js"><link rel="prefetch" href="/cc/assets/js/15.0b75b5a4.js"><link rel="prefetch" href="/cc/assets/js/16.3d7d2683.js"><link rel="prefetch" href="/cc/assets/js/17.a82776df.js"><link rel="prefetch" href="/cc/assets/js/18.10c30dbd.js"><link rel="prefetch" href="/cc/assets/js/19.0b6c3069.js"><link rel="prefetch" href="/cc/assets/js/20.a106a454.js"><link rel="prefetch" href="/cc/assets/js/21.28e65e06.js"><link rel="prefetch" href="/cc/assets/js/22.5b025ab8.js"><link rel="prefetch" href="/cc/assets/js/23.441431ee.js"><link rel="prefetch" href="/cc/assets/js/24.019a3bf5.js"><link rel="prefetch" href="/cc/assets/js/25.0f75ebcf.js"><link rel="prefetch" href="/cc/assets/js/26.d9faeb8a.js"><link rel="prefetch" href="/cc/assets/js/27.0e19c63f.js"><link rel="prefetch" href="/cc/assets/js/28.4b6a8bfd.js"><link rel="prefetch" href="/cc/assets/js/29.1b4d86cb.js"><link rel="prefetch" href="/cc/assets/js/3.c169de8b.js"><link rel="prefetch" href="/cc/assets/js/30.fe97ae87.js"><link rel="prefetch" href="/cc/assets/js/31.1beb1d02.js"><link rel="prefetch" href="/cc/assets/js/32.4373f3af.js"><link rel="prefetch" href="/cc/assets/js/33.60e997e7.js"><link rel="prefetch" href="/cc/assets/js/34.9f361741.js"><link rel="prefetch" href="/cc/assets/js/35.49a089b9.js"><link rel="prefetch" href="/cc/assets/js/36.990b7183.js"><link rel="prefetch" href="/cc/assets/js/37.2715211e.js"><link rel="prefetch" href="/cc/assets/js/38.1bead225.js"><link rel="prefetch" href="/cc/assets/js/39.c04cb296.js"><link rel="prefetch" href="/cc/assets/js/4.a185d924.js"><link rel="prefetch" href="/cc/assets/js/40.0546b73d.js"><link rel="prefetch" href="/cc/assets/js/41.fa6ce8c4.js"><link rel="prefetch" href="/cc/assets/js/42.a63e0efd.js"><link rel="prefetch" href="/cc/assets/js/43.4cd64a44.js"><link rel="prefetch" href="/cc/assets/js/44.d4226257.js"><link rel="prefetch" href="/cc/assets/js/45.d1128a50.js"><link rel="prefetch" href="/cc/assets/js/46.bb031448.js"><link rel="prefetch" href="/cc/assets/js/47.8cc47dd0.js"><link rel="prefetch" href="/cc/assets/js/48.f09301d9.js"><link rel="prefetch" href="/cc/assets/js/49.359b79a2.js"><link rel="prefetch" href="/cc/assets/js/5.987e1949.js"><link rel="prefetch" href="/cc/assets/js/50.96e856f2.js"><link rel="prefetch" href="/cc/assets/js/51.186971c4.js"><link rel="prefetch" href="/cc/assets/js/52.463b10f4.js"><link rel="prefetch" href="/cc/assets/js/53.8eb14bc5.js"><link rel="prefetch" href="/cc/assets/js/54.21a96a68.js"><link rel="prefetch" href="/cc/assets/js/55.56a8f2dc.js"><link rel="prefetch" href="/cc/assets/js/56.a8ae2532.js"><link rel="prefetch" href="/cc/assets/js/57.9c95ff7a.js"><link rel="prefetch" href="/cc/assets/js/58.1489fa03.js"><link rel="prefetch" href="/cc/assets/js/59.fdb272bd.js"><link rel="prefetch" href="/cc/assets/js/6.bb6fb7dd.js"><link rel="prefetch" href="/cc/assets/js/60.fff79ae3.js"><link rel="prefetch" href="/cc/assets/js/61.7a1d340f.js"><link rel="prefetch" href="/cc/assets/js/62.192ee9a1.js"><link rel="prefetch" href="/cc/assets/js/63.2b7c8151.js"><link rel="prefetch" href="/cc/assets/js/64.1a0d7a73.js"><link rel="prefetch" href="/cc/assets/js/65.c6792464.js"><link rel="prefetch" href="/cc/assets/js/66.1f6b74f0.js"><link rel="prefetch" href="/cc/assets/js/67.066dd275.js"><link rel="prefetch" href="/cc/assets/js/68.2c7785f6.js"><link rel="prefetch" href="/cc/assets/js/69.2a018e32.js"><link rel="prefetch" href="/cc/assets/js/7.175c0715.js"><link rel="prefetch" href="/cc/assets/js/70.12e91906.js"><link rel="prefetch" href="/cc/assets/js/71.76446210.js"><link rel="prefetch" href="/cc/assets/js/72.92a4ea1c.js"><link rel="prefetch" href="/cc/assets/js/73.81debf30.js"><link rel="prefetch" href="/cc/assets/js/74.d23daa39.js"><link rel="prefetch" href="/cc/assets/js/75.13eb6111.js"><link rel="prefetch" href="/cc/assets/js/76.0f6f9ed8.js"><link rel="prefetch" href="/cc/assets/js/77.6149f6de.js"><link rel="prefetch" href="/cc/assets/js/78.a87300bf.js"><link rel="prefetch" href="/cc/assets/js/79.8135d08b.js"><link rel="prefetch" href="/cc/assets/js/8.9ae88a5b.js"><link rel="prefetch" href="/cc/assets/js/80.188dfe1d.js"><link rel="prefetch" href="/cc/assets/js/81.16920ec5.js"><link rel="prefetch" href="/cc/assets/js/82.85d82ada.js"><link rel="prefetch" href="/cc/assets/js/83.01d99728.js"><link rel="prefetch" href="/cc/assets/js/84.49eb0e1e.js"><link rel="prefetch" href="/cc/assets/js/85.9c3a02fa.js"><link rel="prefetch" href="/cc/assets/js/86.5a1357c9.js"><link rel="prefetch" href="/cc/assets/js/87.cedd9360.js"><link rel="prefetch" href="/cc/assets/js/88.3a4888c1.js"><link rel="prefetch" href="/cc/assets/js/89.83d1760c.js"><link rel="prefetch" href="/cc/assets/js/9.2bfe7659.js"><link rel="prefetch" href="/cc/assets/js/90.3a2ca01f.js"><link rel="prefetch" href="/cc/assets/js/91.da7f6e32.js"><link rel="prefetch" href="/cc/assets/js/92.46085df6.js"><link rel="prefetch" href="/cc/assets/js/93.3a82f361.js"><link rel="prefetch" href="/cc/assets/js/94.dc6a6c51.js"><link rel="prefetch" href="/cc/assets/js/96.5892ff0e.js"><link rel="prefetch" href="/cc/assets/js/97.c02a8388.js"><link rel="prefetch" href="/cc/assets/js/98.834bf4e8.js"><link rel="prefetch" href="/cc/assets/js/99.703ec57d.js">
    <link rel="stylesheet" href="/cc/assets/css/0.styles.a52545ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cc/" class="home-link router-link-active"><!----> <span class="site-name">1cool</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cc/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/cc/fuTong.html" class="nav-link">
  富通天下
</a></div><div class="nav-item"><a href="/cc/link.html" class="nav-link">
  常用链接
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识点" class="dropdown-title"><span class="title">知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识点" class="mobile-dropdown-title"><span class="title">知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          技术
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cc/skill/web/js/array.html" class="nav-link">
  JS
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/vue2/router/base.html" class="nav-link">
  Vue2
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/vue3/common.html" class="nav-link">
  Vue3
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/css3/bem.html" class="nav-link">
  Css3
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/other/git/common.html" class="nav-link">
  其他
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cc/skill/tool/vscode/fun.html" class="nav-link">
  VsCode
</a></li><li class="dropdown-subitem"><a href="/cc/skill/tool/warehouse/base.html" class="nav-link">
  Github/Gitee
</a></li><li class="dropdown-subitem"><a href="/cc/skill/tool/windows/base.html" class="nav-link">
  装机必备
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/cc/problem/Vue2/base.html" class="nav-link">
  疑难杂症
</a></div><div class="nav-item"><a href="/cc/book/es6/intro.html" class="nav-link">
  书籍
</a></div><div class="nav-item"><a href="/cc/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于我" class="dropdown-title"><span class="title">关于我</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于我" class="mobile-dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cc/my/" class="nav-link">
  关于我
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cc/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/cc/fuTong.html" class="nav-link">
  富通天下
</a></div><div class="nav-item"><a href="/cc/link.html" class="nav-link">
  常用链接
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识点" class="dropdown-title"><span class="title">知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识点" class="mobile-dropdown-title"><span class="title">知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          技术
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cc/skill/web/js/array.html" class="nav-link">
  JS
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/vue2/router/base.html" class="nav-link">
  Vue2
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/vue3/common.html" class="nav-link">
  Vue3
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/css3/bem.html" class="nav-link">
  Css3
</a></li><li class="dropdown-subitem"><a href="/cc/skill/web/other/git/common.html" class="nav-link">
  其他
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cc/skill/tool/vscode/fun.html" class="nav-link">
  VsCode
</a></li><li class="dropdown-subitem"><a href="/cc/skill/tool/warehouse/base.html" class="nav-link">
  Github/Gitee
</a></li><li class="dropdown-subitem"><a href="/cc/skill/tool/windows/base.html" class="nav-link">
  装机必备
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/cc/problem/Vue2/base.html" class="nav-link">
  疑难杂症
</a></div><div class="nav-item"><a href="/cc/book/es6/intro.html" class="nav-link">
  书籍
</a></div><div class="nav-item"><a href="/cc/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于我" class="dropdown-title"><span class="title">关于我</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于我" class="mobile-dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cc/my/" class="nav-link">
  关于我
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实战搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>初始化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>创建项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cc/skill/web/vue3/create/init.html" aria-current="page" class="active sidebar-link">创建项目</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"><div class="side-toc"><ul class="anchor"><li class="anchor-item"><a href="#一-初始化项目" class="anchor-item__link" style="margin-left:0;">
        一. 初始化项目
      </a></li><li class="anchor-item"><a href="#_1-使用-vite-创建项目" class="anchor-item__link" style="margin-left:20px;">
        1. 使用 vite 创建项目
      </a></li><li class="anchor-item"><a href="#默认配置-默认安装-vuerouter-丶-pinia-丶-eslint-丶-prettier" class="anchor-item__link" style="margin-left:20px;">
        默认配置（默认安装: VueRouter 丶 Pinia 丶 ESLint 丶 Prettier）
      </a></li><li class="anchor-item"><a href="#二-去除无用" class="anchor-item__link" style="margin-left:0;">
        二. 去除无用
      </a></li><li class="anchor-item"><a href="#_1-删除无用文件" class="anchor-item__link" style="margin-left:20px;">
        1. 删除无用文件
      </a></li><li class="anchor-item"><a href="#_2-重构文件" class="anchor-item__link" style="margin-left:20px;">
        2. 重构文件
      </a></li><li class="anchor-item"><a href="#三-安装第三方插件-及-配置" class="anchor-item__link" style="margin-left:0;">
        三. 安装第三方插件 及 配置
      </a></li><li class="anchor-item"><a href="#elementplus" class="anchor-item__link" style="margin-left:20px;">
        ElementPlus
      </a></li><li class="anchor-item"><a href="#_2-配置项目内组件-api-的自动引入" class="anchor-item__link" style="margin-left:20px;">
        2. 配置项目内组件 &amp; API 的自动引入
      </a></li><li class="anchor-item"><a href="#vueuse" class="anchor-item__link" style="margin-left:20px;">
        VueUse
      </a></li><li class="anchor-item"><a href="#配置-eslint-和-prettier" class="anchor-item__link" style="margin-left:20px;">
        配置 ESLint 和 Prettier
      </a></li><li class="anchor-item"><a href="#styles-公共样式管理、初始化样式" class="anchor-item__link" style="margin-left:20px;">
        Styles 公共样式管理、初始化样式
      </a></li><li class="anchor-item"><a href="#utils、hooks、api-管理" class="anchor-item__link" style="margin-left:20px;">
        Utils、Hooks、API 管理
      </a></li><li class="anchor-item"><a href="#其他-vite-配置" class="anchor-item__link" style="margin-left:20px;">
        其他 Vite 配置
      </a></li><li class="anchor-item"><a href="#添加-config-配置" class="anchor-item__link" style="margin-left:20px;">
        添加 Config 配置
      </a></li><li class="anchor-item"><a href="#配置-vscode-推荐扩展插件" class="anchor-item__link" style="margin-left:20px;">
        配置 VSCode 推荐扩展插件
      </a></li><li class="anchor-item"><a href="#mock" class="anchor-item__link" style="margin-left:20px;">
        Mock
      </a></li></ul></div> <div class="theme-default-content content__default"><h1 id="创建项目"><a href="#创建项目" class="header-anchor">#</a> 创建项目</h1> <p>部分摘自</p> <ul><li><a href="https://juejin.cn/post/7147353734912147470" target="_blank" rel="noopener noreferrer">这是一份保姆级 Vue3+Vite 实战教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="一-初始化项目"><a href="#一-初始化项目" class="header-anchor">#</a> 一. 初始化项目</h2> <h3 id="_1-使用-vite-创建项目"><a href="#_1-使用-vite-创建项目" class="header-anchor">#</a> 1. 使用 vite 创建项目</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># npm</span>
<span class="token function">npm</span> create vite@latest

<span class="token comment"># yarn</span>
<span class="token function">yarn</span> create vite

<span class="token comment"># pnpm</span>
<span class="token function">pnpm</span> create vite
</code></pre></div><h3 id="默认配置-默认安装-vuerouter-丶-pinia-丶-eslint-丶-prettier"><a href="#默认配置-默认安装-vuerouter-丶-pinia-丶-eslint-丶-prettier" class="header-anchor">#</a> 默认配置（默认安装: VueRouter 丶 Pinia 丶 ESLint 丶 Prettier）</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>✔ Project name（项目名）: project-vue3
✔ Add TypeScript（添加TS）? <span class="token builtin class-name">:</span> No
✔ Add JSX Support（添加JSX支持）? <span class="token builtin class-name">:</span> No
✔ Add Vue Router <span class="token keyword">for</span> Single Page Application development（添加Vue-router）? <span class="token builtin class-name">:</span> Yes
✔ Add Pinia <span class="token keyword">for</span> state management（添加状态管理Pinia）? <span class="token builtin class-name">:</span> Yes
✔ Add Vitest <span class="token keyword">for</span> Unit testing（为单元测试添加Vitest）? <span class="token builtin class-name">:</span> No
✔ Add Cypress <span class="token keyword">for</span> both Unit and End-to-End testing（为单元测试与端到端测试添加Cypress）? <span class="token builtin class-name">:</span> No
✔ Add ESLint <span class="token keyword">for</span> code quality（为代码质量添加ESLint）? <span class="token builtin class-name">:</span> Yes
✔ Add Prettier <span class="token keyword">for</span> code formatting（为代码格式添加Prettier）? <span class="token builtin class-name">:</span> Yes

Scaffolding project <span class="token keyword">in</span> ./tooldog<span class="token punctuation">..</span>.
Done.
</code></pre></div><h2 id="二-去除无用"><a href="#二-去除无用" class="header-anchor">#</a> 二. 去除无用</h2> <h3 id="_1-删除无用文件"><a href="#_1-删除无用文件" class="header-anchor">#</a> 1. 删除无用文件</h3> <p>删除 <code>src/views</code> 下所有文件
删除 <code>src/stores</code> 下所有文件
删除 <code>src/components</code> 下所有文件
删除 <code>src/assets</code> 下所有文件</p> <h3 id="_2-重构文件"><a href="#_2-重构文件" class="header-anchor">#</a> 2. 重构文件</h3> <ol><li>们在 <code>src/views</code> 文件夹下新建一个 <code>HomeView.vue</code> 文件，随便写点东西：</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>hello, This is test-vue3 home page!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>修改一下 <code>router/index.js</code> 路由文件，把之前删掉页面的路由干掉，加上 <code>HomeView</code> 页面的路由</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomePage'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/HomePage.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre></div><ol start="3"><li>修改项目根组件 <code>src/App.vue</code> 的内容，把无用的删了，只留下面内容即可</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> RouterView <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterView</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="4"><li>最后，项目入口文件里，有一行 css 样式的引入，引入的样式文件我们已经删了，所以，把这行代码删除掉</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>

<span class="token comment">// 删除掉，css文件已经删除过了</span>
<span class="token comment">// import './assets/main.css'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><p>ok，处理好之后我们就会得到一个很干净的项目了，如果你的步骤和我一致，目前的文件目录应该是下面这样的，我们简单介绍下它们的作用。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>test-vue3
├─.vscode                <span class="token comment"># vscode配置文件</span>
<span class="token operator">|</span>    └─extensions.json   <span class="token comment"># 项目推荐插件列表（可把项目中用到的vscode插件ID写进去，跑项目时没有安装这些插件会推荐安装）</span>
├─public/                <span class="token comment"># 公共资源目录</span>
├─src/                   <span class="token comment"># 核心开发目录</span>
<span class="token operator">|</span>  ├─App.vue             <span class="token comment"># 项目根组件</span>
<span class="token operator">|</span>  ├─main.js             <span class="token comment"># 项目入口文件</span>
<span class="token operator">|</span>  ├─views/              <span class="token comment"># 项目视图目录</span>
<span class="token operator">|</span>  <span class="token operator">|</span> └─Home/index.vue
<span class="token operator">|</span>  ├─stores/             <span class="token comment"># 统一状态管理目录-pinia</span>
<span class="token operator">|</span>  ├─router/             <span class="token comment"># 项目路由目录</span>
<span class="token operator">|</span>  <span class="token operator">|</span> └─index.js
<span class="token operator">|</span>  ├─components/         <span class="token comment"># 项目公共组件目录</span>
<span class="token operator">|</span>  ├─assets/             <span class="token comment"># 项目静态资源目录</span>
├─.eslintrc.cjs          <span class="token comment"># eslint 配置文件</span>
├─.gitignore             <span class="token comment"># git忽略文件</span>
├─.prettierrc.json       <span class="token comment"># prettier 配置文件</span>
├─README.md              <span class="token comment"># 项目说明文件</span>
├─index.html             <span class="token comment"># html入口文件</span>
├─package.json           <span class="token comment"># 项目配置和包管理文件</span>
├─vite.config.js         <span class="token comment"># vite 配置文件</span>
</code></pre></div><h2 id="三-安装第三方插件-及-配置"><a href="#三-安装第三方插件-及-配置" class="header-anchor">#</a> 三. 安装第三方插件 及 配置</h2> <h3 id="elementplus"><a href="#elementplus" class="header-anchor">#</a> ElementPlus</h3> <p><a href="https://element-plus.org/zh-CN/#/zh-CN" target="_blank" rel="noopener noreferrer">官网网址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_1-安装"><a href="#_1-安装" class="header-anchor">#</a> 1. 安装</h4> <p><a href="https://element-plus.org/zh-CN/guide/installation.html#%E4%BD%BF%E7%94%A8%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8" target="_blank" rel="noopener noreferrer">安装地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>使用包管理器</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># npm</span>
<span class="token function">npm</span> <span class="token function">install</span> element-plus --save

<span class="token comment"># Yarn</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> element-plus

<span class="token comment"># pnpm</span>
$ <span class="token function">pnpm</span> <span class="token function">install</span> element-plus
</code></pre></div><h4 id="_2-使用"><a href="#_2-使用" class="header-anchor">#</a> 2. 使用</h4> <ul><li><a href="https://element-plus.org/zh-CN/guide/quickstart.html#%E5%AE%8C%E6%95%B4%E5%BC%95%E5%85%A5" target="_blank" rel="noopener noreferrer">完整引入<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <details class="custom-block details"><summary>点击查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> ElementPlus <span class="token keyword">from</span> <span class="token string">'element-plus'</span>
<span class="token keyword">import</span> <span class="token string">'element-plus/dist/index.css'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementPlus<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div></details> <ul><li><a href="/cc/skill/web/vue3/create/hhttps:/element-plus.gitee.io/zh-CN/guide/quickstart.html#按需导入">按需引入</a></li></ul> <p>安装插件</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -D unplugin-vue-components unplugin-auto-import
</code></pre></div><p>然后把下列代码插入到你的 <code>Vite</code> 或 <code>Webpack</code> 的配置文件中</p> <p>vite</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vite.config.ts 新增以下内容</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementPlusResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-配置项目内组件-api-的自动引入"><a href="#_2-配置项目内组件-api-的自动引入" class="header-anchor">#</a> 2. 配置项目内组件 &amp; API 的自动引入</h3> <p>我们在使用 <code>Vue</code> 的过程中，每个 <code>script</code> 以及 <code>js</code> 文件中或多或少需要引入一些像 <code>ref</code>、<code>reactive</code> 等 <code>VueAPI</code>，包括 <code>VueRouter</code>、<code>Pinia</code> 等都要引入一些 <code>API</code>，还有我们自己写的组件也都需要我们手动去引入使用。</p> <p>那既然配置了组件库自动引入，我们接下来也配置 API、以及页面组件的自动引入。</p> <p>还是在 vite.config.js 文件中，依旧还是上面那 2 个插件，我们来写一下配置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vite.config.ts 新增以下内容</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ArcoResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 需要去解析的文件</span>
      <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[tj]sx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// .ts, .tsx, .js, .jsx</span>
        <span class="token operator">/</span>\<span class="token punctuation">.</span>vue$<span class="token operator">/</span><span class="token punctuation">,</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue\?vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// .vue</span>
        <span class="token operator">/</span>\<span class="token punctuation">.</span>md$<span class="token operator">/</span> <span class="token comment">// .md</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// imports 指定自动引入的包位置（名）</span>
      <span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'pinia'</span><span class="token punctuation">,</span> <span class="token string">'vue-router'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 生成相应的自动导入json文件。</span>
      <span class="token literal-property property">eslintrc</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 启用</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 生成自动导入json文件位置</span>
        <span class="token literal-property property">filepath</span><span class="token operator">:</span> <span class="token string">'./.eslintrc-auto-import.json'</span><span class="token punctuation">,</span>
        <span class="token comment">// 全局属性值</span>
        <span class="token literal-property property">globalsPropValue</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ArcoResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// imports 指定组件所在目录，默认为 src/components</span>
      <span class="token literal-property property">dirs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/components/'</span><span class="token punctuation">,</span> <span class="token string">'src/view/'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 需要去解析的文件</span>
      <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue\?vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.md$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">ArcoResolver</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">sideEffect</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如上，在 <code>API</code> 自动引入插件 <code>AutoImport</code> 中我们写了指定要去解析的文件 <code>include</code> 配置，然后在 <code>import</code> 选项中指定了自动引入的包名，并且所有自动引入的 <code>API</code> 在被自动引入时会添加记录到根目录的 <code>./.eslintrc-auto-import.json</code> 文件中，方便我们查看都自动引入了哪些东西，后面我们使用这几个包的 <code>API</code> ，就不需要手动引入了，插件会帮我们在文件解析时自动引入。</p> <p>同样的，在组件自动引入插件 <code>Components</code> 中，我们配置了指定要去解析的文件 <code>include</code> 配置，然后在 <code>import</code> 选项中指定了自动引入的组件目录，以后只要是在这几个目录下写的组件，我们在使用时都必须要手动去引入了</p> <p>ok，我们来试一下。</p> <p>我们在 <code>src/components</code> 文件夹下新建一个 <code>HelloWorld.vue</code> 文件，写上下面内容。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'isboyjc'</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>hello {{ name }}, this is helloworld components<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后，直接在 <code>src/views/HomePage.vue</code> 文件中使用 <code>HelloWorld</code> 组件，不要引入，如下：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token function-variable function">handleClickMini</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello, click mini ElButton!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>hello, This is toolsdog home page!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-space</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClickMini<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      Mini
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Small<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Medium<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>large<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Large<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-space</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 这里 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>上面我们在创建的 <code>HelloWorld</code> 组件中使用了 <code>Vue</code> 的 <code>ref API</code>，并没有引入它，而后在 <code>HomeView</code> 页面中使用该组件也没有引入，我们来跑一下项目。</p> <p>nice！后面我们使用 <code>Vue</code>、<code>VueRouter</code>、<code>Pinia</code>、<code>ElementPlus</code> 包括自建组件等等都不需要手动引入了，当然，后续你的项目中有用到其他地方你依然可以在插件中去配置！</p> <h3 id="vueuse"><a href="#vueuse" class="header-anchor">#</a> VueUse</h3> <p><a href="https://vueuse.org/" target="_blank" rel="noopener noreferrer">VueUse<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 没用过的话可以先把它理解为一个基于 Vue 的工具库，Vue2、Vue3 都可以用，有很多实用的方法、组件包括指令，超级方便，后续我们会用到其中的一些方法，所以先装上</p> <h4 id="_1-安装-2"><a href="#_1-安装-2" class="header-anchor">#</a> 1. 安装</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># npm</span>
<span class="token function">npm</span> i @vueuse/core

<span class="token comment"># pnpm</span>
<span class="token function">pnpm</span> <span class="token function">add</span> @vueuse/core
</code></pre></div><h4 id="_2-配置自动引入"><a href="#_2-配置自动引入" class="header-anchor">#</a> 2. 配置自动引入</h4> <p><code>VueUse</code> 不止有方法，还有组件和指令，所以我们还是需要上面两个自动引入的插件去处理，那由于作者是一个人，解析器都内置在自动引入插件中了，所以我们直接导出用就可以了。</p> <p>我们配置 <code>VueUse</code> 的组件和指令自动引入需要两个解析器，还是在 <code>vite.config.js</code> 配置文件中引入，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ArcoVue、VueUse 组件和指令的自动引入解析器</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  ArcoResolver<span class="token punctuation">,</span>
  VueUseComponentsResolver<span class="token punctuation">,</span>
  VueUseDirectiveResolver
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span>
</code></pre></div><p>使用的话，只需要在配置文件 <code>plugins</code> 模块中之前写过的<code>Component</code>s 插件中使用一下这两个解析器就好了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token function">VueUseComponentsResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">VueUseDirectiveResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><p>那 <code>API</code> 方法的自动引入就很简单了，还是配置文件中只需要在之前用过的 <code>AutoImport</code> 插件中添加一个 <code>VueUse</code> 包名配置就行了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 新增 '@vueuse/core'</span>
    <span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'pinia'</span><span class="token punctuation">,</span> <span class="token string">'vue-router'</span><span class="token punctuation">,</span> <span class="token string">'@vueuse/core'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ArcoResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><p>这样我们就可以在项目中随时随地的使用 <code>VueUse</code> 了！建议大家有时间可以去看看 <code>VueUse</code> 的源码实现，也并不复杂，它有很多最佳实践，可以给我们使用 <code>Vue3</code> 提供很大的帮助！</p> <h3 id="配置-eslint-和-prettier"><a href="#配置-eslint-和-prettier" class="header-anchor">#</a> 配置 ESLint 和 Prettier</h3> <p>那上面我们配置了自动引入，但是大家会发现，由于之前我们给项目安装了 ESLint 和 Prettier ，虽然还没有进行配置，但是默认配置会给那些自动引入的 API 报红(报错 ref 之类的未定义哇，之类的)</p> <p>根目录下的 <code>.eslintrc.cjs</code> 是 ESLint 配置，当前默认如下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* eslint-env node */</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@rushstack/eslint-patch/modern-module-resolution'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/eslint-config-prettier'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>根目录下的 <code>.prettierrc.json</code> 是 Prettier 配置，当前默认如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="_1-eslint"><a href="#_1-eslint" class="header-anchor">#</a> 1. Eslint</h4> <p>那报红这种检测肯定是 <code>ESLint</code> 干的， 还记得我们自动引入配置的那个导出文件吗？我们所有自动引入的 <code>API</code> 都生成了记录在这个文件，你只需要将它写入 <code>ESLint</code> 配置的 <code>extends</code> 中让 <code>Lint</code> 工具识别下就好了，如下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* eslint-env node */</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@rushstack/eslint-patch/modern-module-resolution'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 这里</span>
    <span class="token string">'./.eslintrc-auto-import.json'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/eslint-config-prettier'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意，<code>extends</code> 这个继承配置的是一个数组，最终会将所有规则项进行合并，出现冲突的时候，后面的会覆盖前面的，我们在初始化项目安装时默认给加上去了 3 个，我们看看这三个是什么？</p> <ul><li>plugin:vue/vue3-essential
<ul><li><code>ESLint Vue3</code> 插件扩展</li></ul></li> <li>eslint:recommended
<ul><li><code>ESLint</code> 官方扩展</li></ul></li> <li>@vue/eslint-config-prettier
<ul><li><code>Prettier NPM</code> 扩展</li></ul></li></ul> <h4 id="_2-eslint-全局参数"><a href="#_2-eslint-全局参数" class="header-anchor">#</a> 2. Eslint 全局参数</h4> <p>下来要使用 Vue3 的 <code>CompositionAPI</code>，那 Vue3 有几个可以直接在 <code>&lt;script setup&gt;</code>  中可用的全局 API，比如 <code>defineProps</code>、<code>defineEmits</code>、<code>defineExpose</code>，如果你使用 TS，还会用到 <code>withDefaults</code> 。</p> <p>那我们的 <code>ESLint</code> 默认是识别不了这些全局 <code>API</code> 的，此时需要向 <code>ESlint</code> 规则中添加需要辨认的全局变量。</p> <p>那 ESLint 配置中的 <code>globals</code> 属性就是让项目在 <code>lint</code> 执行期间访问额外的全局变量，简单说就是开发者自定义的全局变量，我们依次加上这些属性就可以了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* eslint-env node */</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@rushstack/eslint-patch/modern-module-resolution'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'./.eslintrc-auto-import.json'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/eslint-config-prettier'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 新增</span>
  <span class="token literal-property property">globals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">defineEmits</span><span class="token operator">:</span> <span class="token string">'readonly'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defineProps</span><span class="token operator">:</span> <span class="token string">'readonly'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defineExpose</span><span class="token operator">:</span> <span class="token string">'readonly'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">withDefaults</span><span class="token operator">:</span> <span class="token string">'readonly'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token string">'never'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 禁止尾部使用分号</span>
    <span class="token string-property property">'no-debugger'</span><span class="token operator">:</span> <span class="token string">'warn'</span> <span class="token comment">// 禁止出现 debugger</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如上，添加全局属性时，<code>readonly</code> 代表只读，<code>writable</code> 代表可写，可写就是可以手动覆盖这个全局变量的意思，我们当然是不允许覆盖了，所以全部都设置成了 <code>readonly</code>。</p> <p>可能我们也都发现了，我们新增了一个 <code>rules</code> 属性，如单词字面意思，就是规则的配置，可以配置启用一些规则及其各自的错误级别，那由于每个人的喜好不同，所以我没有过多配置，只配置了 2 个。</p> <p><code>rules</code> 的规则配置有三种：</p> <ul><li><code>off 或 0</code> 关闭对该规则的校验</li> <li><code>warn 或 1</code> 启用规则，不满足时抛出警告，不会退出编译进程</li> <li><code>error 或 2</code> 启用规则，不满足时抛出错误，会退出编译进程</li></ul> <p>注意，如果某项规则，有额外的选项，可以通过数组进行传递，数组的第一位必须是错误级别，就比如我们配置的 <code>semi</code> 规则中的 <code>never</code> 就是额外配置项。</p> <h4 id="_3-配置完了-eslint-我们再来看-prettier-我这边配置了几个常用的-如下"><a href="#_3-配置完了-eslint-我们再来看-prettier-我这边配置了几个常用的-如下" class="header-anchor">#</a> 3. 配置完了 ESLint ，我们再来看 Prettier，我这边配置了几个常用的，如下</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;semi&quot;</span><span class="token builtin class-name">:</span> false,
  <span class="token string">&quot;singleQuote&quot;</span><span class="token builtin class-name">:</span> true,
  <span class="token string">&quot;printWidth&quot;</span><span class="token builtin class-name">:</span> <span class="token number">80</span>,
  <span class="token string">&quot;trailingComma&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;none&quot;</span>,
  <span class="token string">&quot;arrowParens&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;avoid&quot;</span>,
  <span class="token string">&quot;tabWidth&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>semi 代码结尾是否加分号</li> <li>singleQuote 是否使用单引号</li> <li>printWidth 超过多少字符强制换行</li> <li>trailingComma 代码末尾不需要逗号</li> <li>arrowParens 单个参数的箭头函数不加括号 x =&gt; x</li> <li>tabWidth 使用 n 个空格缩进</li></ul> <p><code>Prettier</code> 配置就比较简单，按照文档和喜好在 <code>.prettierrc.json</code> 文件中配置就可以，注意配置的时候一定要和 <code>ESLint</code> 的 <code>rules</code> 比较一下，这里是会发生冲突的地方，检测和格式化规则一定要一致。</p> <h3 id="styles-公共样式管理、初始化样式"><a href="#styles-公共样式管理、初始化样式" class="header-anchor">#</a> Styles 公共样式管理、初始化样式</h3> <h4 id="公共样式处理"><a href="#公共样式处理" class="header-anchor">#</a> 公共样式处理</h4> <p><code>src</code> 目录下新增一个 <code>styles</code> 文件夹，此文件夹我们后期可以放一些公共的样式文件。</p> <p>大家都知道，<code>HTML</code> 标签是有默认样式的，一般我们在写项目时都会直接清除掉这个默认样式，也就是做个重置。</p> <p>那相较于 <a href="https://meyerweb.com/eric/tools/css/reset/" target="_blank" rel="noopener noreferrer">Eric Merer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 原版的清楚样式文件，<code>Normalize.css</code> 它在默认的 <code>HTML</code> 元素样式上提供了跨浏览器的高度一致性，是一种现代的、为 <code>HTML5</code> 准备的优质替代方案，所以我们直接使用它就好了。</p> <p>下载 <a href="https://necolas.github.io/normalize.css/latest/normalize.css" target="_blank" rel="noopener noreferrer">Normalize.css<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 到 <code>styles</code> 文件夹下，当然你也可以直接 <code>npm</code> 安装它，不过我比较喜欢直接下载下来这个文件。</p> <p>下载下来之后直接在 <code>main.js</code> 最上面引入一下就行了，如下</p> <p>其他的公共 <code>css</code> 文件我们用到的时候也可以这样引入一下就可以了。</p> <h3 id="utils、hooks、api-管理"><a href="#utils、hooks、api-管理" class="header-anchor">#</a> Utils、Hooks、API 管理</h3> <p>在项目 <code>src</code> 目录下添加一个 <code>utils</code> 文件夹，此文件夹用于存放我们项目中用到的一些公共方法文件。</p> <p>在项目 <code>src</code> 目录下添加一个 <code>hooks</code> 文件夹，此文件夹用于存放我们项目中用到的一些 <code>hooks</code> 文件，因为我们用 <code>Vue3</code> 的 <code>CompsitionAPI</code>，后面用多了自然会有很多 <code>hooks</code> 文件，针对一些公用的，我们统一管理在此文件夹下</p> <p>平常我们做项目，一般和请求相关的文件都统一放在一个文件夹下，所以我们在项目 src 目录下添加一个 api 文件夹，用于存放和请求相关的文件，因为项目性质，所以我们应该暂时用不到请求后端接口，那这边 api 文件的一些配置以及 axios 的封装甚至 API Mock 配置这里都先不展开说了，回头我会写好这块代码提交到 GitHub ，后面有需要的话会写一篇 axios 封装相关的文章来单独介绍这块。</p> <h3 id="其他-vite-配置"><a href="#其他-vite-配置" class="header-anchor">#</a> 其他 Vite 配置</h3> <p>先来说环境的配置，先放个官方文档压压惊</p> <ul><li><a href="https://cn.vitejs.dev/guide/env-and-mode.html#env-files" target="_blank" rel="noopener noreferrer">Vite env 配置文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>OK，我们在 <code>env</code> 目录下新建下面 3 个文件</p> <ul><li><code>.env</code> 所有模式下都会加载</li> <li><code>.env.development</code> 只在开发模式下加载</li> <li><code>.env.production</code> 只在生产模式下加载</li></ul> <p><code>.env</code> 文件在所有模式下都会加载，所以这里我们可以写一些所有环境都通用的环境变量，如下：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 所有环境都会加载</span>

<span class="token comment"># 项目标识代码</span>
<span class="token assign-left variable">VITE_APP_CODE</span><span class="token operator">=</span><span class="token string">&quot;TOOLSDOG&quot;</span>

<span class="token comment"># 项目名</span>
<span class="token assign-left variable">VITE_APP_NAME</span><span class="token operator">=</span><span class="token string">&quot;工具狗&quot;</span>

<span class="token comment"># 项目描述</span>
<span class="token assign-left variable">VITE_APP_DESCRIPTION</span><span class="token operator">=</span><span class="token string">&quot;你用的到的工具，这里都有！&quot;</span>
</code></pre></div><p>注意，我们在 <code>Vite</code> 中配置的环境变量默认只有以 <code>VITE_</code> 开头的配置，才会暴露给客户端，我们才能在项目中获取到。</p> <p>开发模式 <code>.env.development</code> 配置</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 开发环境加载</span>

<span class="token comment"># 环境标识</span>
<span class="token assign-left variable">VITE_APP_ENV</span><span class="token operator">=</span><span class="token string">&quot;development&quot;</span>

<span class="token comment"># 公共基础路径</span>
<span class="token assign-left variable">VITE_BASE</span><span class="token operator">=</span><span class="token string">&quot;/&quot;</span>

<span class="token comment"># 代理URL路径</span>
VITE_BASE_URL <span class="token operator">=</span><span class="token string">&quot;/api&quot;</span>

<span class="token comment"># 模拟数据接口路径</span>
VITE_BASE_MOCK_URL <span class="token operator">=</span><span class="token string">&quot;/mock-api&quot;</span>

<span class="token comment"># 服务端接口路径</span>
VITE_BASE_SERVER_URL <span class="token operator">=</span> <span class="token string">&quot;...&quot;</span>

<span class="token comment"># 打包是否使用Mock</span>
<span class="token assign-left variable">VITE_APP_PRODMOCK</span><span class="token operator">=</span>false
</code></pre></div><p>那生产环境除了环境标识 <code>VITE_APP_ENV</code> 和开发模式标识不同，其他配置项应尽量保持一致，只是配置项的内容不同而已，不一一的展示了。</p> <p>接下来修改下 <code>package.json</code> 脚本命令如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite --mode development&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --mode production&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;preview&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite preview --port 8081&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint . --ext .vue,.js,.jsx,.cjs,.mjs --fix --ignore-path .gitignore&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面脚本中我们给启动命令搞成了</p> <p>在 <code>dev</code> 脚本命令配置中，我们还传了一个 <code>mode</code>，其实这个 <code>mode</code> 就是对应我们的环境文件 <code>.env.[mode]</code></p> <p>开发环境默认 <code>mode</code> 就是 <code>development</code>，生产环境默认 <code>mode</code> 就是 <code>development</code>，所以脚本命令这里我不传 <code>mode</code> 也可以，但是如果大家把开发环境文件由 <code>.env.development</code> 改成 <code>.env.dev</code>，那脚本中 <code>mode</code> 就得传 <code>—-mode dev</code>，<code>build</code> 时也是一样的道理，如果有其他环境，那脚本命令传入对应的 <code>mode</code> 就可以了。</p> <p>如果想要在 <code>vite.config.js</code> 文件中获取对应运行 <code>mode</code> 环境变量的配置，我们可以使用 <code>vite</code> 的 <a href="https://cn.vitejs.dev/guide/api-javascript.html#loadenv" target="_blank" rel="noopener noreferrer">loadEnv API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p><code>Vite</code> 的 <code>defineConfig</code> 方法也可以接收一个返回配置对象的回调函数，回调函数的参数里我们可以拿到运行脚本命令时传入的 <code>mode</code> 值，从而使用 <code>loadEnv</code> 方法去在 <code>Vite</code> 配置文件中获取对应 <code>mode</code> 下的环境变量，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// export default defineConfig({}) 修改</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> mode <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>那其他一些基础配置就不一一说明了，大家可以直接看 <a href="https://cn.vitejs.dev/" target="_blank" rel="noopener noreferrer">Vite 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="添加-config-配置"><a href="#添加-config-配置" class="header-anchor">#</a> 添加 Config 配置</h3> <p>上面说了，环境变量默认以 <code>VITE_</code> 开头的配置，才会暴露给客户端，我们也写了几个<code>VITE_</code> 开头的配置，所以在项目运行时，我们可以直接 <code>import.meta.env.VITE_XXX</code> 去查看配置，但是这样太麻烦了，所以我们写一个统一的配置文件去获取环境变量，包括项目后期的一些全局配置也可以写里面</p> <p>项目 <code>src</code> 目录下新建 <code>config/config.js</code> 文件，写入下面文件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * @LastEditors: isboyjc
 * @Description: 全局config配置文件
 * @Date: 2022-09-17 14:35:02
 * @LastEditTime: 2022-09-17 14:35:02
 * @Author: isboyjc
 */</span>

<span class="token comment">// 获取环境变量</span>
<span class="token keyword">const</span> <span class="token constant">ENV</span> <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env
<span class="token comment">// 配置文件</span>
<span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 默认配置文件</span>
<span class="token keyword">const</span> configSource <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">appCode</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_APP_CODE</span><span class="token punctuation">,</span>
  <span class="token comment">// 项目标识代码</span>
  <span class="token literal-property property">projectCode</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_APP_CODE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_APP_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token comment">// 项目名</span>
  <span class="token literal-property property">projectName</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_APP_NAME</span><span class="token punctuation">,</span>
  <span class="token comment">// 项目描述</span>
  <span class="token literal-property property">projectDesc</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_APP_DESCRIPTION</span><span class="token punctuation">,</span>
  <span class="token comment">// 资源base地址</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_BASE</span><span class="token punctuation">,</span>
  <span class="token comment">// 接口代理URL路径</span>
  <span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_BASE_URL</span><span class="token punctuation">,</span>
  <span class="token comment">// 模拟数据接口路径</span>
  <span class="token literal-property property">mockBaseUrl</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_BASE_MOCK_URL</span><span class="token punctuation">,</span>
  <span class="token comment">// 服务端接口路径</span>
  <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> <span class="token constant">ENV</span><span class="token punctuation">.</span><span class="token constant">VITE_BASE_SERVER_URL</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author isboyjc
 * @Date 2022-09-17 14:35:02
 * @description 设置全局配置
 * @param {Object} cfg 配置项
 * @return {Object} 新的全局配置 config
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">setConfig</span> <span class="token operator">=</span> <span class="token parameter">cfg</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> cfg<span class="token punctuation">)</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author isboyjc
 * @Date 2022-09-17 14:35:02
 * @description 重置全局配置
 * @param {*}
 * @return {Object} 全局默认配置 configSource
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">resetConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>configSource <span class="token punctuation">}</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span>
<span class="token function">resetConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @Author isboyjc
 * @Date 2022-09-17 14:35:02
 * @description 获取全局配置
 * @param {String} key 配置项，支持 'a.b.c' 的方式获取
 * @return {Object} 新的全局配置 config
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">getConfig</span> <span class="token operator">=</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> data <span class="token operator">=</span> config
      arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> data<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          data <span class="token operator">=</span> data<span class="token punctuation">[</span>v<span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          data <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> data
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> config
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      key<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> data<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>v<span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> res
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>config <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> getConfig<span class="token punctuation">,</span> setConfig<span class="token punctuation">,</span> resetConfig <span class="token punctuation">}</span>
</code></pre></div><p>上面代码不复杂，所以不过多解释了，介绍下为什么用这种方式，而不是直接写一个对象导出，其实是因为有次写项目有用到了动态修改全局配置的需求，所以就把全局配置项获取写成动态的了。</p> <p>我们写入配置时，只需要在 <code>configSource</code> 对象中写入就可以了，项目中使用起来的话如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getConfig<span class="token punctuation">,</span> setConfig<span class="token punctuation">,</span> resetConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/config/config.js&quot;</span>

<span class="token comment">// 获取配置</span>
<span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
<span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token string">&quot;a.b&quot;</span><span class="token punctuation">)</span>
<span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token string">&quot;a.b.c&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 动态设置</span>
<span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 重置配置</span>
<span class="token function">resetConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="配置-vscode-推荐扩展插件"><a href="#配置-vscode-推荐扩展插件" class="header-anchor">#</a> 配置 VSCode 推荐扩展插件</h3> <p>打开项目根目录的 <code>.vscode/extensions.json</code> 文件如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;recommendations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;vue.volar&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这是创建项目时默认存在的扩展插件推荐配置，此文件的作用上面也介绍过了，就是个扩展推荐，数组里是 <code>VSCode</code> 的扩展插件 <code>ID</code>，你在根目录打开此项目时，如果编辑器没有安装这两个插件，<code>VSCode</code> 就会在右下角自动提示你去安装插件。</p> <h3 id="mock"><a href="#mock" class="header-anchor">#</a> Mock</h3> <p>项目开发阶段通常会使用 mock 数据。插件 <a href="https://www.npmjs.com/package/vite-plugin-mock" target="_blank" rel="noopener noreferrer">vite-plugin-mock<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 同时提供了开发环境和生产环境下的数据 mock 服务，简单好用。</p> <h4 id="_1-安装-3"><a href="#_1-安装-3" class="header-anchor">#</a> 1. 安装</h4> <p>插件依赖于 mockjs，需要一并安装：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">add</span> -D vite-plugin-mock mockjs
</code></pre></div><h4 id="_2-配置"><a href="#_2-配置" class="header-anchor">#</a> 2. 配置</h4> <p>在 <code>vite.config.js</code> 配置文件启用插件。</p> <p><strong>Mock 服务通常只用于开发阶段</strong>，因此我们需要在配置文件中判断当前所处环境。</p> <p>在 webpack 中通常会配置一个 <code>NODE_ENV</code> 的环境变量。而在 Vite 中，不用开发者进行设置，它提供了一种方便的判断开发环境和生产环境的方式，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> viteMockServe <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>
​
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> command <span class="token punctuation">}</span> <span class="token operator">=</span> config
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 只在开发阶段开启 mock 服务</span>
        localEnabled<span class="token operator">:</span> command <span class="token operator">===</span> <span class="token string">'serve'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>上面，配置文件导出一个立即执行的 <code>defineConfig</code> 函数。它又接收一个函数作为参数，该函数接收一个 <code>config</code> 参数，它包含一个 <code>command 属性</code>。当在命令行中执行 <code>vite</code> （开发）命令时， <code>command</code> 的值为 <code>serve</code>，当执行 <code>vite build</code> （构建）命令时，对应的值为 <code>build</code>。据此，可以识别所处环境。</p> <p>插件 <code>vite-plugin-mock</code> 有一个配置项 <code>localEnabled</code>，可以决定是否开启 <code>mock</code> 服务。默认即为开启状态。结合 <code>command</code> 属性，就可以动态的切换 <code>mock</code> 服务的状态了。</p> <h4 id="_3-编写-mock-server"><a href="#_3-编写-mock-server" class="header-anchor">#</a> 3. 编写 mock server</h4> <p>该插件开箱即用。默认它会读取项目根目录下 <code>mock</code> 文件下的内容，作为 mock server。</p> <p>新建一个模拟用户接口的服务，它导出一个数组，数组里每一项用来模拟一个接口：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /mock/user.js</span>
​
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token comment">// 用户登录</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 请求地址</span>
    url<span class="token operator">:</span> <span class="token string">&quot;/api/user/login&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求方法</span>
    method<span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 响应数据</span>
    <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          token<span class="token operator">:</span> <span class="token string">&quot;Token&quot;</span><span class="token punctuation">,</span>
          username<span class="token operator">:</span> <span class="token string">&quot;昆吾kw&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>插件内部使用了 <a href="https://github.com/senchalabs/connect" target="_blank" rel="noopener noreferrer">Connect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来提供接口服务，它是一个比 <code>Express</code> 更悠久的 Node HTTP 框架。上面的写法就相当于创建了一个这样的接口服务：</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/user/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token string">'Token'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'昆吾kw'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>由于开启了 <code>mock</code> 服务，当前端在发出 <code>ajax</code> 请求时，会被拦截到，交由 <code>mock</code> 服务处理。没有做数据校验，前端传任何数据来都返回上面的结果。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">11/7/2022, 8:32:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cc/problem/element-ui/components/el-table.html" class="prev">
        Table 表格
      </a></span> <span class="next"><a href="/cc/skill/web/vue3/other/package.html">
        package.json
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><div></div></div></div>
    <script src="/cc/assets/js/app.fafbc94b.js" defer></script><script src="/cc/assets/js/2.1f85ea53.js" defer></script><script src="/cc/assets/js/95.36914ac2.js" defer></script>
  </body>
</html>
