# 代码整洁之道 - 注释篇

## 理论篇

**`注释，不能美化糟糕的代码`**

- 注释本质上是为了弥补`代码表达的不明确性`
  - 如果能用优雅的代码清晰的表达含义的时候，就没必要再使用注释
  - 尽可能做到用简洁清晰的代码逻辑，而不是用大量的注释来弥补糟糕的代码
- 注释`也需要专门去维护`
  - 随着需求的不断迭代，注释很可能也是需要不断去更新的，如果不去维护，时间越久，注释的含义与最新代码的含义差的越远，反而引起歧义

## 实战

### 公共 API 注释

```js
/**
 * @private
 * @param {Function} func The function to invoke
 * @param {Array} args The arguments to invoke `func` with
 * @returns {*} Returns the result of `func`
 */
function apply(func, args) {
  return func.apply(args);
}
```

### TODO 注释

通过 TODO 注释，可以在项目中，把一些暂未实现的功能列表等通过 TODO 注释的形式来记录一下。

```js
// good case
function getNumber(number) {
  // TODO: 这里的状态需要单独维护起来，不应该使用魔术数字。
  const status = 0;
  return number;
}
```

### 警示作用

- 开发中，可能有些代码逻辑可能会导致某种后果
- 代码逻辑已经足够好，但是依然需要去说明一下情况

```js
// good case
function getNumber(number) {
  // FIXME: 这里不应该使用全局变量num
  num = 0;
  return number;
}
```

### 逻辑复杂的也要加上注释

- 逻辑很复杂
- 代码逻辑比较重要，或者需要强调一下，这个时候，也可以通过添加注释的形式去强调。

## 坏习惯

`能用优雅的代码表达，就不要用注释，如果必须加注释，一定要认真去维护和书写注释。`

### 注释不认真对待

一定要认真对待，避免起到反作用，注释也需要花时间阅读。

```js
// bad case
// 获取列表
function getTastList() {
  //...
}
```

1. 多余的注释：已经能够通过方法名比较清晰的明白该方法的作用。`注释的作用是为了弥补代码表达的不足，不是每段代码都要加注释`
2. 误导性注释：既然选择加注释，那就认真对待注释。不要把注释写的模棱两可，或者可有可无，假如文件中还有一个获取其他列表的方法，那是不是就有歧义了。

### 哪里都加注释

1. 注释阅读需要时间
2. 注释需要维护成本

### 注释掉的代码

对别人会产生疑问

- 这段代码是否还有作用，能不能删?
- 注释越多，整体代码质量就会越差

### 注释信息过多

注释的信息过多，也没人愿意看，不仅代码，注释也要简洁，能够说明问题即可。

## vscode 插件推荐

- Better Comments：特点是可以改变注释的颜色，通过不同颜色来表示不同情况
- koroFileHeader：特点是可以在文件头部快捷添加注释和函数注释。
